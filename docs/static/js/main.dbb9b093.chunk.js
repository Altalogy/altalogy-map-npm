(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{54:function(e,t,a){e.exports=a(84)},59:function(e,t,a){},60:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(20),i=a.n(l),s=(a(59),a(9)),o=a(11),c=a(14),u=a(12),p=a(8),m=a(15),d=(a(60),a(44)),h=a(47),f=a(22),v=a.n(f),b=function e(t){Object(s.a)(this,e);var a=Object.assign({id:v()(),type:null,tags:null,options:null,data:null},t);this.id=a.id,this.type=a.type,this.tags=a.tags,this.options=a.options,this.data=a.data},w=a(49),k=a.n(w),g=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.heatmap;return r.a.createElement(k.a,{fitBoundsOnLoad:!0,fitBoundsOnUpdate:!0,points:e.data,longitudeExtractor:function(e){return e[1]},latitudeExtractor:function(e){return e[0]},intensityExtractor:function(e){return parseFloat(e[2])}})}}]),t}(r.a.Component),E=a(45),O=a(46),y=function(e){var t=e.marker;return r.a.createElement(E.a,{id:t.id,position:t.position},t.popup&&r.a.createElement(O.a,null,t.popup))},D=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getMapElements",value:function(){var e=this.props.elements;if(e.length>0)return e.map(function(e,t){if(!e.hidden){if("heatmap"===e.type)return r.a.createElement("div",{className:"heatmap__element",key:v()()},r.a.createElement(g,{heatmap:e}));if("group_markers"===e.type)return e.data.map(function(t){return r.a.createElement("div",{className:"marker__element",key:v()()},r.a.createElement(y,{marker:{id:e.id,position:{lat:t.lat,lng:t.lng},popup:t&&t.popup?t.popup:""}}))});if("marker"===e.type)return r.a.createElement("div",{className:"marker__element",key:v()()},r.a.createElement(y,{marker:{id:e.id,position:{lat:e.data.lat,lng:e.data.lng},popup:e.options&&e.options.popup?e.options.popup:""}}))}return t})}},{key:"render",value:function(){return r.a.createElement("div",null,this.getMapElements())}}]),t}(n.Component),M=a(29),j=a(31),_=a.n(j),S=a(43),R=a(37),C={rectangle:"rectangle",polyline:"polyline",circle:"circle",circlemarker:"circlemarker",marker:"marker",polygon:"polygon"},A={topleft:"topleft",topright:"topright",bottomright:"bottomright",bottomleft:"bottomleft"},N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mapLeafletDrawer:{active:!1,position:"topright",options:{}}},a.setMapLeafletDrawer=a.setMapLeafletDrawer.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"setMapLeafletDrawer",value:function(e,t){var a=null,n=null;_.a.hasIn(A,e)&&(a=e),_.a.hasIn(C,t)?n=Object(M.a)({},t,!1):t&&(n=t),this.setState({mapLeafletDrawer:{active:!(!e&&!t),position:a||"topright",options:t?n:{}}})}},{key:"render",value:function(){var e=this.state.mapLeafletDrawer;return r.a.createElement(S.a,null,e.active&&r.a.createElement(R.a,{position:e.position,draw:e.options}))}}]),t}(r.a.Component),x=(a(79),{rectangle:"rectangle",polyline:"polyline",circle:"circle",circlemarker:"circlemarker",marker:"marker",polygon:"polygon"}),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mapDrawer:"",editable:!1,removable:!1,mapDrawerSettings:{},mapDrawerData:{}},window.react_map={_mapDrawerRef:null},a.setMapDrawer=a.setMapDrawer.bind(Object(p.a)(a)),a.setMapDrawerSettings=a.setMapDrawerSettings.bind(Object(p.a)(a)),a.mapDrawer=a.mapDrawer.bind(Object(p.a)(a)),a.editMapDrawer=a.editMapDrawer.bind(Object(p.a)(a)),a.removeMapDrawer=a.removeMapDrawer.bind(Object(p.a)(a)),a.getMapDrawerData=a.getMapDrawerData.bind(Object(p.a)(a)),a.cancelMapDrawer=a.cancelMapDrawer.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"mapDrawer",value:function(e){window.react_map._mapDrawerRef=e}},{key:"getMapDrawerData",value:function(){var e=this;this.setState({mapDrawerData:window.react_map._mapDrawerRef.leafletElement.options.edit.featureGroup._layers},function(){return e.state.mapDrawerData})}},{key:"setMapDrawer",value:function(e){var t=this.state,a=t.editable,n=t.removable;a?this.editMapDrawer():n&&this.removeMapDrawer(),_.a.hasIn(x,e)&&(window.react_map._mapDrawerRef.leafletElement._toolbars.draw._modes[e].handler.enable(),this.setState({mapDrawer:e})),this.getMapDrawerData()}},{key:"setMapDrawerSettings",value:function(e){e&&this.setState({mapDrawerSettings:e})}},{key:"cancelMapDrawer",value:function(){var e=this.state.mapDrawer;_.a.hasIn(x,e)&&(window.react_map._mapDrawerRef.leafletElement._toolbars.draw._modes[e].handler.disable(),this.setState({mapDrawer:""}))}},{key:"editMapDrawer",value:function(){window.react_map&&window.react_map._mapDrawerRef&&!1===this.state.editable?(this.setState({editable:!0}),window.react_map._mapDrawerRef.leafletElement._toolbars.edit._modes.edit.handler.enable()):(this.setState({editable:!1}),window.react_map._mapDrawerRef.leafletElement._toolbars.edit._modes.edit.handler.disable())}},{key:"removeMapDrawer",value:function(){window.react_map&&window.react_map._mapDrawerRef&&!1===this.state.removable?(this.setState({removable:!0}),window.react_map._mapDrawerRef.leafletElement._toolbars.edit._modes.remove.handler.enable()):(this.setState({removable:!1}),window.react_map._mapDrawerRef.leafletElement._toolbars.edit._modes.remove.handler.disable())}},{key:"render",value:function(){var e=this.mapDrawerSettings,t=this.mapDrawer;return r.a.createElement("div",{className:"custom__map"},r.a.createElement(S.a,null,r.a.createElement(R.a,{position:"topleft",ref:function(e){return t(e)},draw:e})))}}]),t}(r.a.Component),H=(a(80),{center:[50.270908,19.039993],zoom:13}),B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).drawRef=r.a.createRef(),a.leafletDrawer=r.a.createRef(),a.state={elements:[],viewport:H},a.addElements=a.addElements.bind(Object(p.a)(a)),a.setViewport=a.setViewport.bind(Object(p.a)(a)),a.addMarker=a.addMarker.bind(Object(p.a)(a)),a.getElements=a.getElements.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"setViewport",value:function(e,t,a){e&&t&&a&&this.setState({viewport:{center:[e,t],zoom:[a]}})}},{key:"addElements",value:function(e){var t,a=this,n=this.state.elements;e.map(function(e){return t=new b(e),n=n.concat(t)}),this.setState({elements:n},function(){a.props.updateAltaMapState&&a.props.updateAltaMapState()})}},{key:"deleteElement",value:function(e){var t,a=this,n=this.state.elements;n.length>0&&n.map(function(a){return a.tags&&a.tags.indexOf(e)>-1&&(t=n.indexOf(a),n.splice(t,1)),n}),this.setState({elements:n},function(){a.props.updateAltaMapState&&a.props.updateAltaMapState()})}},{key:"deleteElementById",value:function(e){var t,a=this,n=this.state.elements;n.length>0&&n.map(function(a){return a.id===e&&(t=n.indexOf(a),n.splice(t,1)),n}),this.setState({elements:n},function(){a.props.updateAltaMapState&&a.props.updateAltaMapState()})}},{key:"hideElement",value:function(e){var t=this,a=this.state.elements;a.length>0&&(a.map(function(t){return t.tags&&t.tags.indexOf(e)>-1&&(t.hidden=!t.hidden),a}),this.setState({elements:a},function(){t.props.updateAltaMapState&&t.props.updateAltaMapState()}))}},{key:"hideElementById",value:function(e){var t=this,a=this.state.elements;a.length>0&&(a.map(function(t){return t.id===e&&(t.hidden=!t.hidden),a}),this.setState({elements:a},function(){t.props.updateAltaMapState&&t.props.updateAltaMapState()}))}},{key:"getElements",value:function(){return this.state.elements}},{key:"getElementsById",value:function(e){var t,a=this.state.elements;return a.length>0&&a.map(function(a){return a.id===e&&(t=a),t}),t}},{key:"getElementsByTag",value:function(e){var t,a=this.state.elements;return a.length>0&&a.map(function(a){return a.tags&&a.tags.indexOf(e)>-1&&(t=a),t}),t}},{key:"addMarker",value:function(e,t,a){if(e&&t){var n=[{id:v()(),type:"marker",tags:null,options:{popup:a},data:{lat:e,lng:t}}];this.addElements(n)}}},{key:"render",value:function(){var e=this.state,t=e.viewport,a=e.elements;return r.a.createElement(d.a,{minZoom:"4",viewport:t,style:{width:"100%",height:"100%"}},r.a.createElement(h.a,{url:this.props.tileLayer?this.props.tileLayer:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(N,{ref:this.leafletDrawer}),r.a.createElement(L,{ref:this.drawRef}),r.a.createElement(D,{elements:a}))}}]),t}(n.Component),I=a(52),G=a(30),P=[[-37.8839,175.3657417333,"571"],[-37.8869090667,175.3657417333,"486"],[-37.8894207167,175.4015351167,"807"],[-37.8927369333,175.4087452333,"899"],[-37.90585105,175.4453463833,"1273"],[-37.9064188833,175.4441556833,"1258"],[-37.90584715,175.4463564333,"1279"],[-37.9033391333,175.4244005667,"1078"],[-37.9061991333,175.4492620333,"1309"],[-37.9058955167,175.4445613167,"1261"],[-37.88888045,175.39146475,"734"]],V=[{value:"heatmap",label:"Heatmap"},{value:"group_markers",label:"Markers Group"},{value:"marker",label:"Marker"}],W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({selectedOption:e})},a.state={selectedOption:null,heatmap:P,groupMarkers:[],marker:{}},a.updateHeatmapValue=a.updateHeatmapValue.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateHeatmapValue",value:function(e){var t=e.target.value,a=[],n=[],r=1;if("["!==t.charAt(0))JSON.parse("["+t+"]").map(function(e){return n.push(e),r%3===0&&(a.push(n),n=[]),r+=1,a});else if("["===t.charAt(0)){t.split(/[[\]]/).map(function(e){if("-"===e.charAt(0)||e.charAt(0)>="0"&&e.charAt(0)<="9"){var t=JSON.parse("["+e+"]");a.push(t)}return a})}this.setState({heatmap:a})}},{key:"addGroupMarker",value:function(){var e=this.state.groupMarkers;e.push({lat:"",lng:"",popup:""}),this.setState({groupMarkers:e})}},{key:"setMarker",value:function(e,t){this.setState({marker:Object(I.a)({},this.state.marker,Object(M.a)({},t,e.target.value))})}},{key:"setGroupMarker",value:function(e,t,a){var n=this.state.groupMarkers;n[a][t]=e.target.value,this.setState({groupMarkers:n})}},{key:"getOptionComponent",value:function(){var e=this,t=this.state,a=t.selectedOption,n=t.heatmap,l=t.marker,i=t.groupMarkers;switch(a.value){case"heatmap":return r.a.createElement("div",{className:"heatmap"},r.a.createElement("textarea",{name:"message",value:n,onChange:this.updateHeatmapValue,rows:"10",cols:"30"}));case"group_markers":return r.a.createElement("div",{className:"group_markers"},i.map(function(t,a){return r.a.createElement("div",{key:"marker-".concat(a),className:"marker"},r.a.createElement("input",{type:"text",value:t.lat,onChange:function(t){return e.setGroupMarker(t,"lat",a)},placeholder:"Lat"}),r.a.createElement("input",{type:"text",value:t.lng,onChange:function(t){return e.setGroupMarker(t,"lng",a)},placeholder:"Lng"}),r.a.createElement("input",{type:"text",value:t.popup,onChange:function(t){return e.setGroupMarker(t,"popup",a)},placeholder:"Text marker"}))}),r.a.createElement("button",{className:"btn btn--text",onClick:function(){return e.addGroupMarker()}},"Add marker"));case"marker":return r.a.createElement("div",{className:"marker"},r.a.createElement("input",{type:"text",value:l.lat,onChange:function(t){return e.setMarker(t,"lat")},placeholder:"Lat"}),r.a.createElement("input",{type:"text",value:l.lng,onChange:function(t){return e.setMarker(t,"lng")},placeholder:"Lng"}),r.a.createElement("input",{type:"text",value:l.popup,onChange:function(t){return e.setMarker(t,"popup")},placeholder:"Text marker"}))}}},{key:"confirmAddData",value:function(){var e=this.state,t=e.selectedOption,a=e.heatmap,n=e.marker,r=e.groupMarkers;if("heatmap"===t.value){var l=[{type:"heatmap",data:a}];a&&this.props.altaRef.current.addElements(l)}else if("group_markers"===t.value){var i=[{type:"group_markers",data:r}];r&&this.props.altaRef.current.addElements(i)}else"marker"===t.value&&n.lat&&n.lng&&this.props.altaRef.current.addMarker(n.lat,n.lng,n.popup)}},{key:"render",value:function(){var e=this,t=this.state.selectedOption;return r.a.createElement("div",{className:"add__data"},r.a.createElement("h2",null,"Add Element"),r.a.createElement(G.a,{className:"select",classNamePrefix:"select",value:t,onChange:this.handleChange,options:V}),t&&t.value&&this.getOptionComponent(),t&&t.value?r.a.createElement("button",{className:"btn btn--primary",onClick:function(){e.confirmAddData()}},"Submit"):r.a.createElement("button",{className:"btn btn--disabled",disabled:!0},"Submit"))}}]),t}(n.Component),J=(a(83),function(e){return r.a.createElement("div",{className:"drawer__control"},r.a.createElement("button",{onClick:function(){return e.altaRef.current.drawRef.current.setMapDrawer("polyline")}},"Draw Polyline"),r.a.createElement("button",{onClick:function(){return e.altaRef.current.drawRef.current.setMapDrawer("polygon")}},"Draw Polygon"),r.a.createElement("button",{onClick:function(){return e.altaRef.current.drawRef.current.setMapDrawer("rectangle")}},"Draw Rectangle"),r.a.createElement("button",{onClick:function(){return e.altaRef.current.drawRef.current.setMapDrawer("circle")}},"Draw Circle"),r.a.createElement("button",{onClick:function(){return e.altaRef.current.drawRef.current.editMapDrawer()}},"Edit"),r.a.createElement("button",{onClick:function(){return e.altaRef.current.drawRef.current.removeMapDrawer()}},"Remove"))}),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({selectedOption:e})},a.state={selectedOption:null,hide:!1,options:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.elements&&this.setHideOption(e.elements)}},{key:"setHideOption",value:function(e){var t=[];e.map(function(e){return t.push({value:e.id,label:e.id}),t}),this.setState({options:t})}},{key:"confirmHideElement",value:function(){this.props.altaRef.hideElementById(this.state.selectedOption.value),this.setState({hide:!this.state.hide})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedOption,n=t.options;return r.a.createElement("div",{className:"hide__elements"},r.a.createElement("h2",null,"Hide Element"),r.a.createElement(G.a,{className:"select",classNamePrefix:"select",value:a,onChange:this.handleChange,options:n}),a&&a.value?r.a.createElement("button",{className:"btn btn--primary",onClick:function(){e.confirmHideElement()}},"Submit"):r.a.createElement("button",{className:"btn btn--disabled",disabled:!0},"Submit"))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({selectedOption:e})},a.state={selectedOption:null,options:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.elements&&this.setDeleteOption(e.elements)}},{key:"setDeleteOption",value:function(e){var t=[];e.map(function(e){return t.push({value:e.id,label:e.id}),t}),this.setState({options:t})}},{key:"confirmDeleteElement",value:function(){var e=this.state,t=e.selectedOption,a=e.options;this.props.altaRef.deleteElementById(t.value);var n=a,r=n.indexOf(t.value);n.splice(r,1),this.setState({selectedOption:null,options:n})}},{key:"render",value:function(){var e=this,t=this.state,a=t.options,n=t.selectedOption;return r.a.createElement("div",{className:"delete__data"},r.a.createElement("h2",null,"Delete Element"),r.a.createElement(G.a,{className:"select",classNamePrefix:"select",value:n,onChange:this.handleChange,options:a}),n&&n.value?r.a.createElement("button",{className:"btn btn--primary",onClick:function(){e.confirmDeleteElement()}},"Submit"):r.a.createElement("button",{className:"btn btn--disabled",disabled:!0},"Submit"))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={didMount:!1,elements:[]},a.updateAltaMapState=a.updateAltaMapState.bind(Object(p.a)(a)),a.altaRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.altaRef.current&&this.setState({didMount:!this.state.didMount}),this.altaRef.current.addMarker("51.270908","20.039993","KdsaddasATOWICE NOC\u0104 BO MOC\u0104 ")}},{key:"getDeleteAndHideComponent",value:function(){return r.a.createElement("div",null,r.a.createElement(z,{altaRef:this.altaRef.current,elements:this.state.elements}),r.a.createElement(T,{altaRef:this.altaRef.current,elements:this.state.elements}))}},{key:"updateAltaMapState",value:function(){var e=this.altaRef.current.getElements();this.setState({elements:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"AltaMap"),r.a.createElement(J,{altaRef:this.altaRef}),r.a.createElement("div",{style:{width:"100%",height:"500px"}},r.a.createElement(B,{ref:this.altaRef,updateAltaMapState:this.updateAltaMapState})),r.a.createElement(W,{altaRef:this.altaRef}),this.state.didMount&&this.getDeleteAndHideComponent())}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[54,1,2]]]);
//# sourceMappingURL=main.dbb9b093.chunk.js.map